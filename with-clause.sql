-- https://oracle-base.com/articles/misc/with-clause

-------------------------------------- Subquery Factoring ------------------------------------------
/*
The WITH clause, or subquery factoring clause, is part of the SQL-99 standard and was added into the Oracle SQL syntax in Oracle 9.2. 
*/


SELECT e.ename AS employee_name,
       dc.dept_count AS emp_dept_count
FROM   scott.emp e,
       (SELECT deptno, COUNT(*) AS dept_count
        FROM   scott.emp
        GROUP BY deptno) dc
WHERE  e.deptno = dc.deptno;


WITH dept_count AS (
  SELECT deptno, COUNT(*) AS dept_count
  FROM   scott.emp
  GROUP BY deptno)
SELECT e.ename AS employee_name,
       dc.dept_count AS emp_dept_count
FROM   scott.emp e,
       dept_count dc
WHERE  e.deptno = dc.deptno;

--------------------------------------  ------------------------------------------


--------------------------------------  ------------------------------------------


--------------------------------------  ------------------------------------------


--------------------------------------  ------------------------------------------


--------------------------------------  ------------------------------------------


--------------------------------------  ------------------------------------------


--------------------------------------  ------------------------------------------


--------------------------------------  ------------------------------------------


--------------------------------------  ------------------------------------------

--------------------------------------  ------------------------------------------


--------------------------------------  ------------------------------------------


--------------------------------------  ------------------------------------------


--------------------------------------  ------------------------------------------


--------------------------------------  ------------------------------------------


--------------------------------------  ------------------------------------------


--------------------------------------  ------------------------------------------


--------------------------------------  ------------------------------------------


--------------------------------------  ------------------------------------------


--------------------------------------  ------------------------------------------


--------------------------------------  ------------------------------------------


--------------------------------------  ------------------------------------------


--------------------------------------  ------------------------------------------


--------------------------------------  ------------------------------------------